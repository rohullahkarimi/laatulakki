{"ast":null,"code":"import { useState, useRef, useEffect } from 'react';\nfunction useLocalStorageState(key, defaultValue = '', {\n  serialize = JSON.stringify,\n  deserialize = JSON.parse\n} = {}) {\n  const [state, setState] = useState(() => {\n    const valueInLocalStorage = window.localStorage.getItem(key);\n    if (valueInLocalStorage) {\n      try {\n        return deserialize(valueInLocalStorage);\n      } catch {\n        window.localStorage.removeItem(key);\n      }\n    }\n    return typeof defaultValue === 'function' ? defaultValue() : defaultValue;\n  });\n  const prevKeyRef = useRef(key);\n  useEffect(() => {\n    const prevKey = prevKeyRef.current;\n    if (prevKey !== key) {\n      window.localStorage.removeItem(prevKey);\n    }\n    prevKeyRef.current = key;\n    window.localStorage.setItem(key, serialize(state));\n  }, [key, state, serialize]);\n  return [state, setState];\n}\nexport default useLocalStorageState;","map":{"version":3,"names":["useState","useRef","useEffect","useLocalStorageState","key","defaultValue","serialize","JSON","stringify","deserialize","parse","state","setState","valueInLocalStorage","window","localStorage","getItem","removeItem","prevKeyRef","prevKey","current","setItem"],"sources":["/Users/rohullahkarimi/Local/laatuLakki_main/client/node_modules/@flywire/react-hooks/dist/esm/hooks/useLocalStorageState/useLocalStorageState.js"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\nfunction useLocalStorageState(key, defaultValue = '', { serialize = JSON.stringify, deserialize = JSON.parse } = {}) {\n    const [state, setState] = useState(() => {\n        const valueInLocalStorage = window.localStorage.getItem(key);\n        if (valueInLocalStorage) {\n            try {\n                return deserialize(valueInLocalStorage);\n            }\n            catch {\n                window.localStorage.removeItem(key);\n            }\n        }\n        return typeof defaultValue === 'function' ? defaultValue() : defaultValue;\n    });\n    const prevKeyRef = useRef(key);\n    useEffect(() => {\n        const prevKey = prevKeyRef.current;\n        if (prevKey !== key) {\n            window.localStorage.removeItem(prevKey);\n        }\n        prevKeyRef.current = key;\n        window.localStorage.setItem(key, serialize(state));\n    }, [key, state, serialize]);\n    return [state, setState];\n}\nexport default useLocalStorageState;\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AACnD,SAASC,oBAAoBA,CAACC,GAAG,EAAEC,YAAY,GAAG,EAAE,EAAE;EAAEC,SAAS,GAAGC,IAAI,CAACC,SAAS;EAAEC,WAAW,GAAGF,IAAI,CAACG;AAAM,CAAC,GAAG,CAAC,CAAC,EAAE;EACjH,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,MAAM;IACrC,MAAMa,mBAAmB,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAACZ,GAAG,CAAC;IAC5D,IAAIS,mBAAmB,EAAE;MACrB,IAAI;QACA,OAAOJ,WAAW,CAACI,mBAAmB,CAAC;MAC3C,CAAC,CACD,MAAM;QACFC,MAAM,CAACC,YAAY,CAACE,UAAU,CAACb,GAAG,CAAC;MACvC;IACJ;IACA,OAAO,OAAOC,YAAY,KAAK,UAAU,GAAGA,YAAY,CAAC,CAAC,GAAGA,YAAY;EAC7E,CAAC,CAAC;EACF,MAAMa,UAAU,GAAGjB,MAAM,CAACG,GAAG,CAAC;EAC9BF,SAAS,CAAC,MAAM;IACZ,MAAMiB,OAAO,GAAGD,UAAU,CAACE,OAAO;IAClC,IAAID,OAAO,KAAKf,GAAG,EAAE;MACjBU,MAAM,CAACC,YAAY,CAACE,UAAU,CAACE,OAAO,CAAC;IAC3C;IACAD,UAAU,CAACE,OAAO,GAAGhB,GAAG;IACxBU,MAAM,CAACC,YAAY,CAACM,OAAO,CAACjB,GAAG,EAAEE,SAAS,CAACK,KAAK,CAAC,CAAC;EACtD,CAAC,EAAE,CAACP,GAAG,EAAEO,KAAK,EAAEL,SAAS,CAAC,CAAC;EAC3B,OAAO,CAACK,KAAK,EAAEC,QAAQ,CAAC;AAC5B;AACA,eAAeT,oBAAoB"},"metadata":{},"sourceType":"module"}