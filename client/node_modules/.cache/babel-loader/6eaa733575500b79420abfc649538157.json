{"ast":null,"code":"var _jsxFileName = \"/Users/rohullahkarimi/Local/laatuLakki_main/client/src/components/cart/Success.jsx\",\n  _s = $RefreshSig$();\nimport { CheckCircle } from \"@mui/icons-material\";\n//import { useSearchParams } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { mobile } from \"../../responsive\";\nimport { useTranslation } from \"react-i18next\";\nimport axios from \"axios\";\nimport { emptyCart } from \"../../redux/cartRedux\";\nimport { useDispatch } from \"react-redux\";\nimport { hotjar } from 'react-hotjar';\nimport { getCookie } from \"../../common/js/common.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst InfoContainer = styled.div`\n    text-align: center;\n    padding: 0px 50px;\n    margin: 10% 0;\n    ${mobile({\n  padding: \"10px\"\n})}\n`;\n_c = InfoContainer;\nconst Title = styled.h2`\n    text-align: center;\n    margin-bottom: 4%;\n`;\n_c2 = Title;\nconst IconHolder = styled.div`\n    text-align: center;\n`;\n_c3 = IconHolder;\nconst Desc = styled.p`\n    margin: 20px 0px;\n`;\n_c4 = Desc;\nconst Button = styled.button`\n  padding: 10px;\n  font-weight: 600;\n  width: 120px;\n  cursor: pointer;\n  border: ${props => props.type === \"filled\" && \"none\"};\n  background-color: ${props => props.type === \"filled\" ? \"black\" : \"transparent\"};\n  color: ${props => props.type === \"filled\" && \"white\"};\n`;\n_c5 = Button;\nconst Success = () => {\n  _s();\n  const {\n    t\n  } = useTranslation();\n  const dispatch = useDispatch();\n  //const [searchParams, setSearchParams] = useSearchParams();\n  const queryParameters = new URLSearchParams(window.location.search);\n  const checkoutStatus = queryParameters.get(\"checkout-status\");\n  const orderId = queryParameters.get(\"checkout-reference\");\n  const axiosInstance = axios.create({\n    baseURL: process.env.REACT_APP_API_URL //process.env.REACT_APP_API_URL,\n  });\n\n  // call hotjar if user accepted preferences cookie\n  if (getCookie(\"rcl_preferences_consent\") === \"true\") {\n    hotjar.initialize(3220042, 6);\n    hotjar.identify('USER_ID', {\n      userProperty: 'value'\n    });\n  }\n  const getOrderData = async orderId => {\n    try {\n      const res = await axios.get(process.env.REACT_APP_API_URL + \"/orders/getOrder/HDcSmyZpaWqR/find/\" + orderId);\n      return res.data;\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  const sendMail = async orderId => {\n    if (!orderId) {\n      alert(\"Order id is not defined yet.\");\n      return;\n    }\n    try {\n      await axiosInstance.get(\"/sendMail/\" + orderId).then(res => {\n        if (res.data.status !== \"ok\") {\n          // redirect user to cancel page\n        } else if (res.data.status === \"ok\") {\n          console.log(\"order paid and email send\");\n          dispatch(emptyCart());\n        }\n      });\n    } catch (error) {\n      console.log('Error', error.message);\n    }\n  };\n  if (checkoutStatus === \"ok\") {\n    // call to send mail function \n    sendMail(orderId);\n  }\n  const navigateToReceipt = () => {\n    getOrderData(orderId).then(response => {\n      window.location.href = process.env.REACT_APP_CLIENT_URL + \"/receipt?orderId=\" + orderId + \"_\" + response.receiptHash;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(InfoContainer, {\n    children: [/*#__PURE__*/_jsxDEV(IconHolder, {\n      children: /*#__PURE__*/_jsxDEV(CheckCircle, {\n        size: \"50px\",\n        sx: {\n          color: \"green\",\n          fontSize: \"60px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Title, {\n      children: t(\"thanksForYourOrder\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Desc, {\n      children: t(\"youCanDownloadReceipt\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: navigateToReceipt,\n      type: \"filled\",\n      children: t(\"receipt\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n};\n_s(Success, \"kRPr/hYd52YWlSb9olvMJ8xOO+s=\", false, function () {\n  return [useTranslation, useDispatch];\n});\n_c6 = Success;\nexport default Success;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"InfoContainer\");\n$RefreshReg$(_c2, \"Title\");\n$RefreshReg$(_c3, \"IconHolder\");\n$RefreshReg$(_c4, \"Desc\");\n$RefreshReg$(_c5, \"Button\");\n$RefreshReg$(_c6, \"Success\");","map":{"version":3,"names":["CheckCircle","styled","mobile","useTranslation","axios","emptyCart","useDispatch","hotjar","getCookie","jsxDEV","_jsxDEV","InfoContainer","div","padding","_c","Title","h2","_c2","IconHolder","_c3","Desc","p","_c4","Button","button","props","type","_c5","Success","_s","t","dispatch","queryParameters","URLSearchParams","window","location","search","checkoutStatus","get","orderId","axiosInstance","create","baseURL","process","env","REACT_APP_API_URL","initialize","identify","userProperty","getOrderData","res","data","err","console","log","sendMail","alert","then","status","error","message","navigateToReceipt","response","href","REACT_APP_CLIENT_URL","receiptHash","children","size","sx","color","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c6","$RefreshReg$"],"sources":["/Users/rohullahkarimi/Local/laatuLakki_main/client/src/components/cart/Success.jsx"],"sourcesContent":["import { CheckCircle } from \"@mui/icons-material\";\n//import { useSearchParams } from \"react-router-dom\";\nimport styled from \"styled-components\"\nimport { mobile } from \"../../responsive\"\nimport { useTranslation } from \"react-i18next\";\nimport axios from \"axios\";\nimport { emptyCart } from \"../../redux/cartRedux\";\nimport { useDispatch } from \"react-redux\";\nimport { hotjar } from 'react-hotjar';\nimport {getCookie} from \"../../common/js/common.js\";\n\n\n\n\nconst InfoContainer = styled.div`\n    text-align: center;\n    padding: 0px 50px;\n    margin: 10% 0;\n    ${mobile({padding: \"10px\"})}\n`\n\nconst Title = styled.h2`\n    text-align: center;\n    margin-bottom: 4%;\n`\n\n\nconst IconHolder = styled.div`\n    text-align: center;\n`\n\nconst Desc = styled.p`\n    margin: 20px 0px;\n`\n\n\nconst Button = styled.button`\n  padding: 10px;\n  font-weight: 600;\n  width: 120px;\n  cursor: pointer;\n  border: ${(props) => props.type === \"filled\" && \"none\"};\n  background-color: ${(props) =>\n    props.type === \"filled\" ? \"black\" : \"transparent\"};\n  color: ${(props) => props.type === \"filled\" && \"white\"};\n`;\n\nconst Success = () => {\n  const { t } = useTranslation();\n  const dispatch = useDispatch()\n  //const [searchParams, setSearchParams] = useSearchParams();\n  const queryParameters = new URLSearchParams(window.location.search)\n  const checkoutStatus = queryParameters.get(\"checkout-status\")\n  const orderId = queryParameters.get(\"checkout-reference\")\n  const axiosInstance = axios.create({\n    baseURL: process.env.REACT_APP_API_URL //process.env.REACT_APP_API_URL,\n  });\n\n  // call hotjar if user accepted preferences cookie\n  if(getCookie(\"rcl_preferences_consent\") === \"true\"){\n    hotjar.initialize(3220042, 6)\n    hotjar.identify('USER_ID', { userProperty: 'value' });\n  }\n\n  const getOrderData = async (orderId) => {\n    try{\n      const res = await axios.get(process.env.REACT_APP_API_URL+\"/orders/getOrder/HDcSmyZpaWqR/find/\"+orderId);\n      return res.data;\n    }catch(err){\n      console.log(err);\n    }\n  }\n\n  const sendMail = async (orderId) => {\n    if(!orderId){\n      alert(\"Order id is not defined yet.\")\n      return \n    }\n    try {\n      await axiosInstance.get(\"/sendMail/\"+orderId)\n      .then((res) => {\n        if(res.data.status !== \"ok\"){\n          // redirect user to cancel page\n          \n        }else if(res.data.status === \"ok\"){\n          console.log(\"order paid and email send\")\n          dispatch(emptyCart());\n        }\n      });\n    } catch(error) {\n      console.log('Error', error.message);\n    }\n  }\n\n  if(checkoutStatus === \"ok\"){\n    // call to send mail function \n    sendMail(orderId)\n  }\n  \n  const navigateToReceipt = () =>{\n    getOrderData(orderId).then((response) => {\n      window.location.href = process.env.REACT_APP_CLIENT_URL+\"/receipt?orderId=\"+orderId+\"_\"+response.receiptHash;\n    })\n    \n  }\n\n  return (\n    <InfoContainer>\n      <IconHolder>\n          <CheckCircle     \n              size=\"50px\"\n              sx={{color: \"green\", fontSize: \"60px\"}}\n          />\n      </IconHolder>\n      \n      <Title>{t(\"thanksForYourOrder\")}</Title>\n      <Desc>{t(\"youCanDownloadReceipt\")}</Desc>\n      <Button onClick={navigateToReceipt} type=\"filled\">{t(\"receipt\")}</Button>\n    </InfoContainer>\n  );\n};\n\nexport default Success;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}