{"ast":null,"code":"import { useEffect, useReducer, useRef } from 'react';\nimport validate from './validate';\nimport isEqualWith from 'lodash.isequalwith';\nimport { actionTypes } from './types';\nfunction noop() {\n  // do nothin\n}\nfunction customizer(value, other) {\n  if (typeof value === 'function' || typeof other === 'function') {\n    return true;\n  }\n}\nfunction useValidate(data = {}, constraints = {}, {\n  onError = noop,\n  onSuccess = noop\n} = {}) {\n  const [state, dispatch] = useReducer((state, action) => {\n    switch (action.type) {\n      case actionTypes.VALIDATION_SUCCESS:\n        return {\n          ...state,\n          errors: {},\n          isValid: true\n        };\n      case actionTypes.VALIDATION_ERROR:\n        return {\n          ...state,\n          errors: action.errors,\n          isValid: false\n        };\n      default:\n        return state;\n    }\n  }, {\n    errors: {},\n    isValid: false\n  });\n  function perform() {\n    const errors = validate.validate(data, constraints);\n    if (errors) {\n      dispatch({\n        type: actionTypes.VALIDATION_ERROR,\n        errors\n      });\n      onError(errors);\n      return false;\n    }\n    dispatch({\n      type: actionTypes.VALIDATION_SUCCESS\n    });\n    onSuccess();\n    return true;\n  }\n  useEffect(() => {\n    if (isEqualWith(previousInputs.current, [data, constraints], customizer)) {\n      return;\n    }\n    perform();\n  });\n  const previousInputs = useRef();\n  useEffect(() => {\n    previousInputs.current = [data, constraints];\n  });\n  return {\n    ...state,\n    validate: perform\n  };\n}\nexport default useValidate;","map":{"version":3,"names":["useEffect","useReducer","useRef","validate","isEqualWith","actionTypes","noop","customizer","value","other","useValidate","data","constraints","onError","onSuccess","state","dispatch","action","type","VALIDATION_SUCCESS","errors","isValid","VALIDATION_ERROR","perform","previousInputs","current"],"sources":["/Users/rohullahkarimi/Local/laatuLakki_main/client/node_modules/@flywire/react-hooks/dist/esm/hooks/useValidate/useValidate.js"],"sourcesContent":["import { useEffect, useReducer, useRef } from 'react';\nimport validate from './validate';\nimport isEqualWith from 'lodash.isequalwith';\nimport { actionTypes, } from './types';\nfunction noop() {\n    // do nothin\n}\nfunction customizer(value, other) {\n    if (typeof value === 'function' || typeof other === 'function') {\n        return true;\n    }\n}\nfunction useValidate(data = {}, constraints = {}, { onError = noop, onSuccess = noop } = {}) {\n    const [state, dispatch] = useReducer((state, action) => {\n        switch (action.type) {\n            case actionTypes.VALIDATION_SUCCESS:\n                return { ...state, errors: {}, isValid: true };\n            case actionTypes.VALIDATION_ERROR:\n                return { ...state, errors: action.errors, isValid: false };\n            default:\n                return state;\n        }\n    }, {\n        errors: {},\n        isValid: false,\n    });\n    function perform() {\n        const errors = validate.validate(data, constraints);\n        if (errors) {\n            dispatch({ type: actionTypes.VALIDATION_ERROR, errors });\n            onError(errors);\n            return false;\n        }\n        dispatch({ type: actionTypes.VALIDATION_SUCCESS });\n        onSuccess();\n        return true;\n    }\n    useEffect(() => {\n        if (isEqualWith(previousInputs.current, [data, constraints], customizer)) {\n            return;\n        }\n        perform();\n    });\n    const previousInputs = useRef();\n    useEffect(() => {\n        previousInputs.current = [data, constraints];\n    });\n    return { ...state, validate: perform };\n}\nexport default useValidate;\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,UAAU,EAAEC,MAAM,QAAQ,OAAO;AACrD,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAOC,WAAW,MAAM,oBAAoB;AAC5C,SAASC,WAAW,QAAS,SAAS;AACtC,SAASC,IAAIA,CAAA,EAAG;EACZ;AAAA;AAEJ,SAASC,UAAUA,CAACC,KAAK,EAAEC,KAAK,EAAE;EAC9B,IAAI,OAAOD,KAAK,KAAK,UAAU,IAAI,OAAOC,KAAK,KAAK,UAAU,EAAE;IAC5D,OAAO,IAAI;EACf;AACJ;AACA,SAASC,WAAWA,CAACC,IAAI,GAAG,CAAC,CAAC,EAAEC,WAAW,GAAG,CAAC,CAAC,EAAE;EAAEC,OAAO,GAAGP,IAAI;EAAEQ,SAAS,GAAGR;AAAK,CAAC,GAAG,CAAC,CAAC,EAAE;EACzF,MAAM,CAACS,KAAK,EAAEC,QAAQ,CAAC,GAAGf,UAAU,CAAC,CAACc,KAAK,EAAEE,MAAM,KAAK;IACpD,QAAQA,MAAM,CAACC,IAAI;MACf,KAAKb,WAAW,CAACc,kBAAkB;QAC/B,OAAO;UAAE,GAAGJ,KAAK;UAAEK,MAAM,EAAE,CAAC,CAAC;UAAEC,OAAO,EAAE;QAAK,CAAC;MAClD,KAAKhB,WAAW,CAACiB,gBAAgB;QAC7B,OAAO;UAAE,GAAGP,KAAK;UAAEK,MAAM,EAAEH,MAAM,CAACG,MAAM;UAAEC,OAAO,EAAE;QAAM,CAAC;MAC9D;QACI,OAAON,KAAK;IACpB;EACJ,CAAC,EAAE;IACCK,MAAM,EAAE,CAAC,CAAC;IACVC,OAAO,EAAE;EACb,CAAC,CAAC;EACF,SAASE,OAAOA,CAAA,EAAG;IACf,MAAMH,MAAM,GAAGjB,QAAQ,CAACA,QAAQ,CAACQ,IAAI,EAAEC,WAAW,CAAC;IACnD,IAAIQ,MAAM,EAAE;MACRJ,QAAQ,CAAC;QAAEE,IAAI,EAAEb,WAAW,CAACiB,gBAAgB;QAAEF;MAAO,CAAC,CAAC;MACxDP,OAAO,CAACO,MAAM,CAAC;MACf,OAAO,KAAK;IAChB;IACAJ,QAAQ,CAAC;MAAEE,IAAI,EAAEb,WAAW,CAACc;IAAmB,CAAC,CAAC;IAClDL,SAAS,CAAC,CAAC;IACX,OAAO,IAAI;EACf;EACAd,SAAS,CAAC,MAAM;IACZ,IAAII,WAAW,CAACoB,cAAc,CAACC,OAAO,EAAE,CAACd,IAAI,EAAEC,WAAW,CAAC,EAAEL,UAAU,CAAC,EAAE;MACtE;IACJ;IACAgB,OAAO,CAAC,CAAC;EACb,CAAC,CAAC;EACF,MAAMC,cAAc,GAAGtB,MAAM,CAAC,CAAC;EAC/BF,SAAS,CAAC,MAAM;IACZwB,cAAc,CAACC,OAAO,GAAG,CAACd,IAAI,EAAEC,WAAW,CAAC;EAChD,CAAC,CAAC;EACF,OAAO;IAAE,GAAGG,KAAK;IAAEZ,QAAQ,EAAEoB;EAAQ,CAAC;AAC1C;AACA,eAAeb,WAAW"},"metadata":{},"sourceType":"module"}